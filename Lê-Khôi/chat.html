<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Messenger UI</title>
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; font-family: Arial, sans-serif; background-color: #121212; color: white; }
    .container { display: flex; flex-direction: column; height: 100vh; }
    .topbar { display: flex; align-items: center; padding: 10px 20px; background-color: #1e1e1e; }
    .search-bar { flex: 1; margin: 0 20px; padding: 8px; background: #333; border: none; border-radius: 5px; color: white; }
    .main { flex: 1; display: flex; }
    .sidebar { width: 260px; background: #1a1a1a; padding: 10px; display: flex; flex-direction: column; transition: width 0.3s; }
    .sidebar.expanded { width: 100%; }
    .chat-list { flex: 1; overflow-y: auto; max-height: calc(100vh - 80px); }
    .chat-item { display: flex; align-items: center; padding: 10px; cursor: pointer; border-bottom: 1px solid #333; }
    .chat-item:hover { background-color: #2a2a2a; }
    .chat-window { width: calc(100% - 260px); display: flex; flex-direction: column; transition: width 0.3s; }
    .chat-window.closed { width: 0; display: none; }
    .chat-header, .chat-input { display: flex; align-items: center; padding: 10px; background: #1e1e1e; }
    .chat-header .right-btns { margin-left: auto; display: flex; gap: 10px; }
    .chat-content { flex: 1; padding: 10px; overflow-y: auto; background-color: #181818; }
    .avatar { width: 40px; height: 40px; border-radius: 50%; margin-right: 10px; }
    .message { margin-bottom: 10px; background: #333; padding: 8px 12px; border-radius: 8px; max-width: 70%; }
    .message.sent { align-self: flex-end; background-color: #007bff; }
    .message.received { align-self: flex-start; }
    .typing { font-style: italic; font-size: 0.9em; opacity: 0.6; }
    .chat-input input[type="text"] { flex: 1; padding: 8px; background: #333; border: none; border-radius: 5px; color: white; margin-right: 5px; }
    .chat-input input[type="file"] { display: none; }
    .chat-input button, .chat-input label { background: #4CAF50; border: none; color: white; padding: 8px 12px; border-radius: 5px; cursor: pointer; }
    .chat-input label { display: flex; align-items: center; }
    .chat-input label svg { margin-right: 4px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="logo">Messenger</div>
      <input type="text" placeholder="T√¨m b·∫°n b√®..." class="search-bar" oninput="filterFriends(this.value)"/>
    </div>
    <div class="main">
      <div class="sidebar" id="sidebar">
        <h3>Chats</h3>
        <div class="chat-list" id="chatList"></div>
      </div>
      <div class="chat-window" id="chatWindow">
        <div class="chat-header">
          <img src="" id="chat-avatar" class="avatar" />
          <div>
            <div id="chat-name">User</div>
            <div class="status" id="chat-status">Online</div>
          </div>
          <div class="right-btns">
            <span style="cursor:pointer" onclick="startCall()">
              üîä
            </span>
            <span style="cursor:pointer" onclick="startVideo()">
              üé•
            </span>
            <span style="cursor:pointer" onclick="closeChat()">
              ‚ùå
            </span>
          </div>
        </div>
        <div class="chat-content" id="chat-content"></div>
        <div class="chat-input">
          <label for="imgInput"><svg width="16" height="16"><path fill="white" d="M2 2h12v12H2z"/></svg>Pic</label>
          <input type="file" id="imgInput" accept="image/*" onchange="sendImage(event)" />
          <input type="text" id="messageInput" placeholder="Nh·∫≠p tin nh·∫Øn..." onkeypress="if(event.key==='Enter') sendMessage()" />
          <button onclick="sendMessage()">G·ª≠i</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const users = Array.from({length: 20}, (_, i) => ({
      name: `Friend ${i+1}`,
      avatar: `https://i.pravatar.cc/150?img=${i+1}`,
      online: Math.random() > 0.3
    }));
    let currentUser = null;

    function renderUsers(filtered=users) {
      const list = document.getElementById("chatList"); list.innerHTML="";
      filtered.forEach(u=>{
        const d=document.createElement("div");
        d.className="chat-item";
        d.innerHTML=`<img src="${u.avatar}" class="avatar"/><span>${u.name}</span>`;
        d.onclick=()=>openChat(u);
        list.appendChild(d);
      });
    }

    function openChat(u){
      currentUser=u;
      document.getElementById("chat-name").innerText=u.name;
      document.getElementById("chat-avatar").src=u.avatar;
      document.getElementById("chat-status").innerText = u.online ? "Online" : "Offline";
      document.getElementById("chat-content").innerHTML="";
      document.getElementById("chatWindow").classList.remove("closed");
      document.getElementById("sidebar").classList.remove("expanded");
    }

    function sendMessage(){
      const txt=document.getElementById("messageInput");
      if(!currentUser||!txt.value.trim()) return;
      appendMessage(txt.value,"sent");
      txt.value="";
    }

    function appendMessage(t,cls){
      const cont=document.getElementById("chat-content");
      const d=document.createElement("div");
      d.className=`message ${cls}`;
      const time=new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
      d.innerHTML=`<div>${t}</div><div style="font-size:10px;color:#aaa;margin-top:4px;">${time}</div>`;
      cont.appendChild(d);
      cont.scrollTop=cont.scrollHeight;
    }

    function sendImage(e){
      if(!currentUser) return;
      const file=e.target.files[0];
      new FileReader().onload = evt => {
        const cont=document.getElementById("chat-content");
        const d=document.createElement("div");
        d.className="message sent";
        d.innerHTML=`<img src="${evt.target.result}" style="max-width:200px;border-radius:8px;"/><div style="font-size:10px;color:#aaa;margin-top:4px;">${new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}</div>`;
        cont.appendChild(d); cont.scrollTop=cont.scrollHeight;
      };
      e.target.value="";
      e.target.files[0] && new FileReader().readAsDataURL(e.target.files[0]);
    }

    function filterFriends(q) {
      renderUsers(users.filter(u=>u.name.toLowerCase().includes(q.toLowerCase())));
    }

    function closeChat(){
      document.getElementById("chatWindow").classList.add("closed");
      document.getElementById("sidebar").classList.add("expanded");
    }

    function startCall(){
      alert("üöÄ ƒêang g·ªçi tho·∫°i v·ªõi " + (currentUser?.name || ""));
    }
    function startVideo(){
      alert("üöÄ ƒêang g·ªçi video v·ªõi " + (currentUser?.name || ""));
    }

    window.onload = ()=>renderUsers();
  </script>
</body>
</html>

